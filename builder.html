<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì—¬í–‰ ê°€ì´ë“œ ë¹Œë” V2 (Dual Plan)</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
    body { font-family: -apple-system, sans-serif; background: #f3f4f6; padding: 20px; padding-bottom: 120px; }
    .container { max-width: 900px; margin: 0 auto; }
    .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 20px; }
    .input-field { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 6px; margin-bottom: 5px; }
    .btn { padding: 8px 16px; border-radius: 6px; font-weight: bold; cursor: pointer; border: none; color: white; transition: 0.2s; }
    .btn-blue { background: #3b82f6; }
    .btn-green { background: #10b981; width: 100%; padding: 15px; font-size: 1.1rem; box-shadow: 0 4px 10px rgba(16, 185, 129, 0.3); }
    .btn-red { background: #ef4444; font-size: 0.75rem; padding: 4px 8px; }
    .btn-gray { background: #6b7280; }
    
    .day-block { border: 1px solid #e5e7eb; border-radius: 8px; padding: 15px; margin-bottom: 20px; background: #fff; }
    .plan-tab { display: flex; gap: 10px; margin-bottom: 10px; border-bottom: 2px solid #f3f4f6; padding-bottom: 10px; }
    .tab-btn { flex: 1; padding: 8px; text-align: center; border-radius: 6px; cursor: pointer; font-weight: bold; color: #6b7280; background: #f9fafb; }
    .tab-btn.active { background: #eff6ff; color: #2563eb; border: 1px solid #bfdbfe; }
    .tab-btn.active-b { background: #fff1f2; color: #db2777; border: 1px solid #fecdd3; }

    .event-item { background: #f9fafb; padding: 10px; border-radius: 8px; margin-bottom: 8px; border: 1px solid #eee; position: relative; }
    .event-item.plan-b { background: #fff1f2; border-color: #fecdd3; }
</style>
</head>
<body>

<div class="container">
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold text-gray-800">ğŸ§³ ì—¬í–‰ ë¹Œë” V2 (A/B í”Œëœ)</h1>
        <button onclick="saveWork()" class="btn btn-gray text-xs">ì„ì‹œ ì €ì¥</button>
    </div>

    <!-- 1. ê¸°ë³¸ ì„¤ì • -->
    <div class="card">
        <h2 class="text-xl font-bold mb-4">1. ê¸°ë³¸ ì„¤ì •</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="font-bold text-sm text-gray-600">ì—¬í–‰ ì œëª©</label>
                <input type="text" id="appTitle" class="input-field" value="ì‹œì¦ˆì˜¤ì¹´ ì—¬í–‰">
            </div>
            <div>
                <label class="font-bold text-sm text-gray-600">í…Œë§ˆ ìƒ‰ìƒ</label>
                <select id="themeColor" class="input-field">
                    <option value="blue">ë¸”ë£¨ (ê¸°ë³¸)</option>
                    <option value="pink">í•‘í¬ (ë²šê½ƒ)</option>
                    <option value="green">ê·¸ë¦° (ìì—°)</option>
                    <option value="purple">í¼í”Œ (ì•¼ê²½)</option>
                </select>
            </div>
        </div>
        <div class="mt-4 p-3 bg-gray-50 rounded-lg border border-gray-200">
            <h3 class="font-bold text-sm text-gray-700 mb-2">ğŸ”„ ì„ íƒ ëª¨ë“œ ì„¤ì • (ì˜ˆ: ë ŒíŠ¸ì¹´ vs ëŒ€ì¤‘êµí†µ)</h3>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="text-xs text-blue-600 font-bold">Plan A ì´ë¦„ (ê¸°ë³¸)</label>
                    <input type="text" id="planAName" class="input-field" value="ë ŒíŠ¸ì¹´">
                </div>
                <div>
                    <label class="text-xs text-pink-600 font-bold">Plan B ì´ë¦„ (ì„ íƒ)</label>
                    <input type="text" id="planBName" class="input-field" value="ëŒ€ì¤‘êµí†µ" placeholder="ë¹„ì›Œë‘ë©´ ëª¨ë“œ ì„ íƒ ê¸°ëŠ¥ì´ êº¼ì§‘ë‹ˆë‹¤">
                </div>
            </div>
        </div>
    </div>

    <!-- 2. ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
    <div class="card">
        <h2 class="text-xl font-bold mb-4">2. ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
        <div id="check-list"></div>
        <button onclick="addCheck()" class="btn btn-blue text-sm mt-2">+ í•­ëª© ì¶”ê°€</button>
    </div>

    <!-- 3. ì¼ì • ê´€ë¦¬ -->
    <div class="card">
        <h2 class="text-xl font-bold mb-4">3. ìƒì„¸ ì¼ì •</h2>
        <p class="text-sm text-gray-500 mb-4">ğŸ“… ë‚ ì§œë³„ë¡œ Plan Aì™€ Plan B ì¼ì •ì„ ê°ê° ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        <div id="days-container"></div>
        <button onclick="addDay()" class="btn btn-blue w-full mt-4">+ ë‚ ì§œ(Day) ì¶”ê°€</button>
    </div>
</div>

<!-- í•˜ë‹¨ ê³ ì • ë²„íŠ¼ -->
<div class="fixed bottom-0 left-0 w-full p-4 bg-white border-t shadow-lg z-50">
    <div class="container">
        <button onclick="generateFile()" class="btn btn-green">âœ¨ ìµœì¢… ì•± íŒŒì¼ ìƒì„± (HTML ë‹¤ìš´ë¡œë“œ)</button>
        <p class="text-xs text-center text-gray-500 mt-2">ì´ íŒŒì¼ì„ GitHubì— index.htmlë¡œ ì˜¬ë¦¬ì„¸ìš”. ì£¼ì†Œê°€ ê¹”ë”í•´ì§‘ë‹ˆë‹¤!</p>
    </div>
</div>

<script>
    // --- ë°ì´í„° êµ¬ì¡° ---
    let tripData = {
        title: "ì‹œì¦ˆì˜¤ì¹´ ì—¬í–‰", theme: "blue",
        planA: "ë ŒíŠ¸ì¹´", planB: "ëŒ€ì¤‘êµí†µ",
        checks: [{text:"ì—¬ê¶Œ"}, {text:"ë¼ì§€ì½”"}, {text:"ë™ì „ì§€ê°‘"}],
        days: [
            { 
                date: "1ì¼ì°¨", title: "ì¶œêµ­ & ë„ì°©",
                eventsA: [{time:"10:00", icon:"âœˆï¸", type:"fly", title:"ê³µí•­ ë„ì°©", desc:"ì…êµ­ì‹¬ì‚¬", map:""}],
                eventsB: [] 
            }
        ]
    };

    // ì•„ì´ì½˜ ì˜µì…˜
    const iconOpts = [
        {v:"fly", l:"âœˆï¸ì´ë™"}, {v:"bus", l:"ğŸšŒë²„ìŠ¤"}, {v:"train", l:"ğŸš†ê¸°ì°¨"},
        {v:"car", l:"ğŸš—ì°¨ëŸ‰"}, {v:"food", l:"ğŸ”ì‹ì‚¬"}, {v:"beer", l:"ğŸºìˆ "},
        {v:"camera", l:"ğŸ“·ê´€ê´‘"}, {v:"shop", l:"ğŸ›ï¸ì‡¼í•‘"}, {v:"bed", l:"ğŸ›ï¸ìˆ™ì†Œ"}, 
        {v:"map", l:"ğŸ“ì¥ì†Œ"}
    ];

    // --- ë Œë”ë§ ---
    function render() {
        document.getElementById('appTitle').value = tripData.title;
        document.getElementById('themeColor').value = tripData.theme;
        document.getElementById('planAName').value = tripData.planA;
        document.getElementById('planBName').value = tripData.planB;

        // ì²´í¬ë¦¬ìŠ¤íŠ¸
        const cList = document.getElementById('check-list');
        cList.innerHTML = '';
        tripData.checks.forEach((c, i) => {
            cList.innerHTML += `
                <div class="flex gap-2 mb-2">
                    <input class="input-field" value="${c.text}" oninput="tripData.checks[${i}].text=this.value">
                    <button class="btn btn-red" onclick="tripData.checks.splice(${i},1); render();">ì‚­ì œ</button>
                </div>`;
        });

        // ì¼ì • ë¦¬ìŠ¤íŠ¸
        const dCont = document.getElementById('days-container');
        dCont.innerHTML = '';
        
        tripData.days.forEach((d, dIdx) => {
            // Day ë³„ Plan A/B íƒ­ ìƒíƒœ ê´€ë¦¬ (ì„ì‹œë¡œ DOM ì†ì„±ì— ì €ì¥ ì•ˆí•˜ê³  ê·¸ëƒ¥ Aë¥¼ ë³´ì—¬ì¤Œ, í´ë¦­ì‹œ JSë¡œ ì „í™˜)
            // í¸ì˜ìƒ ë Œë”ë§ ì‹œì—ëŠ” í˜„ì¬ í™œì„±í™”ëœ íƒ­ ì •ë³´ë¥¼ ì–´ë”˜ê°€ì— ì €ì¥í•´ì•¼ í•˜ì§€ë§Œ, ê°„ë‹¨í•˜ê²Œ êµ¬í˜„í•˜ê¸° ìœ„í•´
            // ê° Day ë°•ìŠ¤ ì•ˆì— ë‘ ë¦¬ìŠ¤íŠ¸ë¥¼ ë‹¤ ê·¸ë ¤ë‘ê³  CSSë¡œ ìˆ¨ê¹€ ì²˜ë¦¬ í•˜ëŠ” ë°©ì‹ ì‚¬ìš©
            
            const activeTab = d._activeTab || 'A'; // ê¸°ë³¸ A

            let eventsAHtml = renderEvents(d.eventsA, dIdx, 'A');
            let eventsBHtml = renderEvents(d.eventsB, dIdx, 'B');

            const div = document.createElement('div');
            div.className = 'day-block';
            div.innerHTML = `
                <div class="flex justify-between items-end mb-4">
                    <div class="w-1/3"><label class="text-xs font-bold text-gray-500">ë‚ ì§œ</label><input class="input-field font-bold" value="${d.date}" onchange="updateDay(${dIdx}, 'date', this.value)"></div>
                    <div class="w-1/2 ml-2"><label class="text-xs font-bold text-gray-500">í…Œë§ˆ</label><input class="input-field" value="${d.title}" onchange="updateDay(${dIdx}, 'title', this.value)"></div>
                    <button class="btn btn-red h-8 ml-2" onclick="removeDay(${dIdx})">ì‚­ì œ</button>
                </div>
                
                <div class="plan-tab">
                    <div class="tab-btn ${activeTab==='A'?'active':''}" onclick="switchDayTab(${dIdx}, 'A')">ğŸ…°ï¸ ${tripData.planA || 'Plan A'}</div>
                    <div class="tab-btn ${activeTab==='B'?'active-b':''}" onclick="switchDayTab(${dIdx}, 'B')">ğŸ…±ï¸ ${tripData.planB || 'Plan B'}</div>
                </div>

                <div id="day-${dIdx}-list-A" style="display:${activeTab==='A'?'block':'none'}">
                    ${eventsAHtml}
                    <button class="w-full py-2 border-2 border-dashed border-blue-200 text-blue-500 rounded text-sm hover:bg-blue-50" onclick="addEvent(${dIdx}, 'A')">+ ${tripData.planA} ì¼ì • ì¶”ê°€</button>
                </div>
                <div id="day-${dIdx}-list-B" style="display:${activeTab==='B'?'block':'none'}">
                    <div class="p-2 bg-pink-50 text-xs text-pink-600 mb-2 rounded">Plan B(ëŒ€ì•ˆ ì¼ì •)ê°€ ì—†ë‹¤ë©´ ë¹„ì›Œë‘ì„¸ìš”.</div>
                    ${eventsBHtml}
                    <button class="w-full py-2 border-2 border-dashed border-pink-200 text-pink-500 rounded text-sm hover:bg-pink-50" onclick="addEvent(${dIdx}, 'B')">+ ${tripData.planB} ì¼ì • ì¶”ê°€</button>
                </div>
            `;
            dCont.appendChild(div);
        });
    }

    function renderEvents(events, dIdx, planType) {
        if(!events) return '';
        return events.map((e, eIdx) => {
            let opts = iconOpts.map(o => `<option value="${o.v}" ${e.type===o.v?'selected':''}>${o.l}</option>`).join('');
            return `
            <div class="event-item ${planType==='B'?'plan-b':''}">
                <button class="absolute top-2 right-2 text-red-400 text-xs font-bold" onclick="removeEvent(${dIdx}, ${eIdx}, '${planType}')">X</button>
                <div class="flex gap-2 mb-1">
                    <input class="input-field w-20" value="${e.time}" placeholder="ì‹œê°„" onchange="updateEvent(${dIdx}, ${eIdx}, '${planType}', 'time', this.value)">
                    <select class="input-field w-24" onchange="updateEvent(${dIdx}, ${eIdx}, '${planType}', 'type', this.value); updateEvent(${dIdx}, ${eIdx}, '${planType}', 'icon', this.options[this.selectedIndex].text.substring(0,2))">${opts}</select>
                    <input class="input-field" value="${e.title}" placeholder="ì œëª©" onchange="updateEvent(${dIdx}, ${eIdx}, '${planType}', 'title', this.value)">
                </div>
                <input class="input-field text-sm mb-1" value="${e.desc}" placeholder="ì„¤ëª… (ë©”ëª¨)" onchange="updateEvent(${dIdx}, ${eIdx}, '${planType}', 'desc', this.value)">
                <input class="input-field text-sm" value="${e.map||''}" placeholder="êµ¬ê¸€ì§€ë„ ê²€ìƒ‰ì–´ (ì˜ˆ: ë„ì¿„ íƒ€ì›Œ)" onchange="updateEvent(${dIdx}, ${eIdx}, '${planType}', 'map', this.value)">
            </div>`;
        }).join('');
    }

    // --- ë¡œì§ í•¨ìˆ˜ë“¤ ---
    function updateDay(idx, key, val) { tripData.days[idx][key] = val; }
    function removeDay(idx) { if(confirm('ì‚­ì œí•©ë‹ˆê¹Œ?')) { tripData.days.splice(idx, 1); render(); } }
    function addDay() { tripData.days.push({date:"Day "+(tripData.days.length+1), title:"", eventsA:[], eventsB:[]}); render(); }
    
    function switchDayTab(dIdx, tab) { tripData.days[dIdx]._activeTab = tab; render(); }
    
    function addEvent(dIdx, plan) {
        const newEv = {time:"00:00", type:"map", icon:"ğŸ“", title:"", desc:"", map:""};
        if(plan === 'A') tripData.days[dIdx].eventsA.push(newEv);
        else tripData.days[dIdx].eventsB.push(newEv);
        render();
    }
    
    function removeEvent(dIdx, eIdx, plan) {
        if(plan === 'A') tripData.days[dIdx].eventsA.splice(eIdx, 1);
        else tripData.days[dIdx].eventsB.splice(eIdx, 1);
        render();
    }
    
    function updateEvent(dIdx, eIdx, plan, key, val) {
        if(plan === 'A') tripData.days[dIdx].eventsA[eIdx][key] = val;
        else tripData.days[dIdx].eventsB[eIdx][key] = val;
    }
    
    function addCheck() { tripData.checks.push({text:""}); render(); }

    function saveWork() {
        // ì…ë ¥ í•„ë“œ ê°•ì œ ë™ê¸°í™”
        tripData.title = document.getElementById('appTitle').value;
        tripData.theme = document.getElementById('themeColor').value;
        tripData.planA = document.getElementById('planAName').value;
        tripData.planB = document.getElementById('planBName').value;
        localStorage.setItem('myTripDataV2', JSON.stringify(tripData));
        alert('ë¸Œë¼ìš°ì €ì— ì„ì‹œ ì €ì¥ë¨!');
    }

    window.onload = function() {
        const saved = localStorage.getItem('myTripDataV2');
        if(saved) {
             if(confirm('ì €ì¥ëœ ì‘ì—… ë‚´ìš©ì„ ë¶ˆëŸ¬ì˜¬ê¹Œìš”?')) tripData = JSON.parse(saved);
        }
        render();
    }

    // --- â­ HTML íŒŒì¼ ìƒì„±ê¸° ---
    function generateFile() {
        saveWork(); // ë°ì´í„° ìµœì‹ í™”

        // í…œí”Œë¦¿ ë¡œë“œ
        let template = document.getElementById('app-template').innerHTML;
        
        // ë°ì´í„° ì£¼ì…
        const dataScript = `const TRIP_DATA = ${JSON.stringify(tripData)};`;
        const finalHtml = template.replace('/*__DATA__*/', dataScript);
        
        // ë‹¤ìš´ë¡œë“œ
        const blob = new Blob([finalHtml], { type: 'text/html' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'index.html';
        a.click();
        window.URL.revokeObjectURL(url);
    }
</script>

<!-- â–¼â–¼â–¼ ê²°ê³¼ë¬¼ ì•± í…œí”Œë¦¿ (V28 ìŠ¤íƒ€ì¼ ê³„ìŠ¹ + ë“€ì–¼ ëª¨ë“œ) â–¼â–¼â–¼ -->
<script type="text/template" id="app-template">
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ì—¬í–‰ ê°€ì´ë“œ</title>
<style>
    /* Base */
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
    body { font-family: -apple-system, sans-serif; background: #f3f4f6; color: #1f2937; height: 100dvh; display: flex; justify-content: center; overflow: hidden; }
    .app-container { width: 100%; max-width: 480px; height: 100%; background: #fff; display: flex; flex-direction: column; position: relative; }
    
    /* Header */
    header { padding: 1.5rem; padding-bottom: 1rem; color: white; transition: 0.3s; z-index: 10; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-radius: 0 0 1.5rem 1.5rem; flex-shrink: 0; }
    header.shrink { padding: 0.8rem 1rem; border-radius: 0 0 1rem 1rem; }
    .bg-blue { background: linear-gradient(to right, #3b82f6, #06b6d4); }
    .bg-pink { background: linear-gradient(to right, #ec4899, #f43f5e); }
    .bg-green { background: linear-gradient(to right, #10b981, #059669); }
    .bg-purple { background: linear-gradient(to right, #8b5cf6, #6366f1); }

    .title { font-size: 1.5rem; font-weight: 800; margin-bottom: 5px; }
    header.shrink .title { font-size: 1.1rem; margin: 0; }
    
    /* Toggle Switch */
    .mode-toggle { display: flex; background: rgba(0,0,0,0.15); border-radius: 99px; padding: 3px; margin-top: 10px; width: fit-content; transition: 0.2s; }
    header.shrink .mode-toggle { display: none; }
    .mode-btn { padding: 5px 12px; border-radius: 99px; border: none; font-size: 0.8rem; font-weight: bold; cursor: pointer; color: rgba(255,255,255,0.8); background: transparent; transition: 0.2s; }
    .mode-btn.active { background: white; color: #333; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }

    /* Content */
    main { flex: 1; overflow-y: auto; padding: 1rem; padding-bottom: 5rem; scroll-behavior: smooth; }
    .card { background: white; border-radius: 1rem; padding: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05); margin-bottom: 1rem; border: 1px solid #f3f4f6; }
    .card-title { font-size: 1.1rem; font-weight: 800; margin-bottom: 1rem; color: #374151; border-bottom: 2px solid #f3f4f6; padding-bottom: 0.5rem; }

    /* Tabs */
    .day-tabs { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 5px; margin-bottom: 10px; }
    .day-tabs::-webkit-scrollbar { display: none; }
    .day-btn { white-space: nowrap; padding: 8px 14px; border-radius: 99px; font-size: 0.9rem; font-weight: bold; border: none; background: #f3f4f6; color: #6b7280; cursor: pointer; }
    .day-btn.active { background: #1f2937; color: white; }

    /* Timeline */
    .event-item { display: flex; gap: 12px; margin-bottom: 20px; position: relative; }
    .event-item::before { content: ''; position: absolute; left: 19px; top: 35px; bottom: -20px; width: 2px; background: #e5e7eb; z-index: 0; }
    .event-item:last-child::before { display: none; }
    
    .icon-box { width: 40px; height: 40px; flex-shrink: 0; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; z-index: 1; position: relative; background: #eff6ff; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    /* Icon Colors */
    .type-fly { background: #dbeafe; color: #2563eb; } .type-bus { background: #dcfce7; color: #16a34a; }
    .type-car { background: #e0e7ff; color: #4f46e5; } .type-food { background: #ffedd5; color: #ea580c; }
    .type-beer { background: #fef9c3; color: #ca8a04; } .type-camera { background: #fce7f3; color: #db2777; }
    .type-shop { background: #f3e8ff; color: #9333ea; } .type-bed { background: #f3f4f6; color: #4b5563; }

    .time { font-size: 0.75rem; font-weight: bold; color: #6b7280; background: #f3f4f6; padding: 2px 6px; border-radius: 4px; }
    .evt-title { font-size: 1rem; font-weight: bold; color: #1f2937; margin: 2px 0; }
    .evt-desc { font-size: 0.85rem; color: #6b7280; line-height: 1.4; white-space: pre-wrap; }
    .btn-map { display: inline-flex; align-items: center; font-size: 0.75rem; font-weight: 600; color: #2563eb; background: #eff6ff; padding: 3px 8px; border-radius: 6px; margin-left: auto; cursor: pointer; border: none; }

    /* Check */
    .check-item { display: flex; align-items: center; gap: 10px; padding: 12px; border-bottom: 1px solid #f3f4f6; cursor: pointer; }
    .check-box { width: 20px; height: 20px; border-radius: 4px; border: 2px solid #d1d5db; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; }
    .checked .check-box { background: #10b981; border-color: #10b981; }
    .checked span { text-decoration: line-through; color: #9ca3af; }

    /* Nav */
    nav { position: absolute; bottom: 0; width: 100%; background: white; border-top: 1px solid #e5e7eb; display: flex; justify-content: space-around; padding: 12px 0; padding-bottom: max(12px, env(safe-area-inset-bottom)); z-index: 50; }
    .nav-btn { background: none; border: none; font-size: 0.7rem; font-weight: 600; color: #9ca3af; display: flex; flex-direction: column; align-items: center; gap: 4px; cursor: pointer; width: 33%; }
    .nav-btn.active { color: #1f2937; }
    .nav-btn svg { width: 24px; height: 24px; stroke-width: 2px; }

</style>
</head>
<body>

<div class="app-container">
    <header id="header" class="bg-blue">
        <div class="title" id="disp-title">ì—¬í–‰ ê°€ì´ë“œ</div>
        <div id="subtitle" style="font-size:0.85rem; opacity:0.9;">ì¦ê±°ìš´ ì—¬í–‰ ë˜ì„¸ìš”!</div>
        
        <!-- ëª¨ë“œ ì„ íƒ í† ê¸€ (Plan Bê°€ ìˆì„ ë•Œë§Œ ë³´ì„) -->
        <div id="mode-toggle-area" class="mode-toggle" style="display:none;">
            <button onclick="setMode('A')" id="btn-mode-a" class="mode-btn active">Plan A</button>
            <button onclick="setMode('B')" id="btn-mode-b" class="mode-btn">Plan B</button>
        </div>
    </header>

    <main id="main-scroll">
        <div id="content-area"></div>
    </main>

    <nav>
        <button onclick="setTab('sch')" class="nav-btn active" id="btn-sch">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>ì¼ì •
        </button>
        <button onclick="setTab('chk')" class="nav-btn" id="btn-chk">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>ì²´í¬
        </button>
        <button onclick="setTab('info')" class="nav-btn" id="btn-info">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>ì •ë³´
        </button>
    </nav>
</div>

<script>
    /*__DATA__*/
    // ìœ„ ë¼ì¸ì€ ë¹Œë”ì— ì˜í•´ ì‹¤ì œ ë°ì´í„°ë¡œ ëŒ€ì²´ë¨
    if(typeof TRIP_DATA === 'undefined') var TRIP_DATA = { title:"ìƒ˜í”Œ", days:[] };

    let state = { tab: 'sch', dayIdx: 0, mode: 'A', checked: {} };

    // ì €ì¥ëœ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë¡œë“œ
    const savedChecks = localStorage.getItem('chk_' + TRIP_DATA.title);
    if(savedChecks) state.checked = JSON.parse(savedChecks);

    function init() {
        document.getElementById('disp-title').innerText = TRIP_DATA.title;
        document.getElementById('header').className = 'bg-' + (TRIP_DATA.theme || 'blue');
        
        // Plan Bê°€ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ í† ê¸€ í‘œì‹œ
        const hasPlanB = TRIP_DATA.days.some(d => d.eventsB && d.eventsB.length > 0) && TRIP_DATA.planB;
        if(hasPlanB) {
            document.getElementById('mode-toggle-area').style.display = 'flex';
            document.getElementById('btn-mode-a').innerText = TRIP_DATA.planA || 'Plan A';
            document.getElementById('btn-mode-b').innerText = TRIP_DATA.planB || 'Plan B';
        }

        render();
    }

    function render() {
        // íƒ­ UI
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('btn-' + state.tab).classList.add('active');
        
        const content = document.getElementById('content-area');
        content.innerHTML = '';

        if(state.tab === 'sch') renderSchedule(content);
        else if(state.tab === 'chk') renderChecklist(content);
        else renderInfo(content);

        // ëª¨ë“œ ë²„íŠ¼ ìŠ¤íƒ€ì¼
        if(document.getElementById('mode-toggle-area').style.display !== 'none') {
            document.getElementById('btn-mode-a').className = state.mode === 'A' ? 'mode-btn active' : 'mode-btn';
            document.getElementById('btn-mode-b').className = state.mode === 'B' ? 'mode-btn active' : 'mode-btn';
        }
    }

    function renderSchedule(cont) {
        if(!TRIP_DATA.days.length) { cont.innerHTML = '<div class="card">ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</div>'; return; }

        // ë‚ ì§œ íƒ­
        let tabs = '<div class="day-tabs">';
        TRIP_DATA.days.forEach((d, i) => {
            tabs += `<button onclick="setDay(${i})" class="day-btn ${i===state.dayIdx?'active':''}">${d.date}</button>`;
        });
        tabs += '</div>';

        const curDay = TRIP_DATA.days[state.dayIdx];
        const events = state.mode === 'A' ? curDay.eventsA : curDay.eventsB;
        
        document.getElementById('subtitle').innerText = curDay.title || (state.mode === 'A' ? TRIP_DATA.planA : TRIP_DATA.planB) + ' ì¼ì •';

        let list = '<div class="card">';
        if(!events || events.length === 0) {
            list += `<div style="text-align:center; padding:20px; color:#9ca3af;">${state.mode === 'A' ? TRIP_DATA.planA : TRIP_DATA.planB} ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</div>`;
        } else {
            events.forEach(e => {
                const mapBtn = e.map ? `<button onclick="openMap('${e.map}')" class="btn-map">ğŸ“ ì§€ë„</button>` : '';
                list += `
                <div class="event-item">
                    <div class="icon-box type-${e.type}">${e.icon}</div>
                    <div style="flex:1;">
                        <div style="display:flex; justify-content:space-between; align-items:center;">
                            <span class="time">${e.time}</span>
                            ${mapBtn}
                        </div>
                        <div class="evt-title">${e.title}</div>
                        <div class="evt-desc">${e.desc}</div>
                    </div>
                </div>`;
            });
        }
        list += '</div>';
        cont.innerHTML = tabs + list;
    }

    function renderChecklist(cont) {
        document.getElementById('subtitle').innerText = 'ì¤€ë¹„ë¬¼ ì²´í¬ë¦¬ìŠ¤íŠ¸';
        let html = '<div class="card"><div class="card-title">ğŸ‘œ ì§ì‹¸ê¸°</div>';
        (TRIP_DATA.checks || []).forEach((c, i) => {
            const isChk = state.checked[i];
            html += `
            <div class="check-item ${isChk?'checked':''}" onclick="toggleCheck(${i})">
                <div class="check-box">${isChk?'âœ”':''}</div>
                <span>${c.text}</span>
            </div>`;
        });
        html += '</div>';
        cont.innerHTML = html;
    }

    function renderInfo(cont) {
        document.getElementById('subtitle').innerText = 'ìœ ìš©í•œ ì •ë³´';
        cont.innerHTML = `
        <div class="card">
            <div class="card-title">ğŸ†˜ ê¸´ê¸‰ ì—°ë½ì²˜</div>
            <div class="check-item" onclick="location.href='tel:110'">ğŸ‘®â€â™‚ï¸ ê²½ì°°ì„œ (110)</div>
            <div class="check-item" onclick="location.href='tel:119'">ğŸš‘ êµ¬ê¸‰ì°¨ (119)</div>
        </div>
        <div class="card">
            <div class="card-title">ğŸ”— ë¹ ë¥¸ ë§í¬</div>
            <div class="check-item" onclick="window.open('https://translate.google.com')">ğŸ—£ï¸ êµ¬ê¸€ ë²ˆì—­ê¸°</div>
            <div class="check-item" onclick="window.open('https://www.google.com/maps')">ğŸ—ºï¸ êµ¬ê¸€ ì§€ë„</div>
        </div>`;
    }

    // Actions
    window.setTab = (t) => { state.tab = t; render(); window.scrollTo(0,0); };
    window.setDay = (i) => { state.dayIdx = i; render(); };
    window.setMode = (m) => { state.mode = m; render(); window.scrollTo(0,0); };
    window.openMap = (q) => window.open('https://www.google.com/maps/search/?api=1&query='+encodeURIComponent(q));
    window.toggleCheck = (i) => {
        state.checked[i] = !state.checked[i];
        localStorage.setItem('chk_' + TRIP_DATA.title, JSON.stringify(state.checked));
        render();
    };

    // Scroll
    document.getElementById('main-scroll').addEventListener('scroll', function() {
        if(this.scrollTop > 20) document.getElementById('header').classList.add('shrink');
        else document.getElementById('header').classList.remove('shrink');
    });

    init();
<\/script>
</body>
</html>
</script>

</body>
</html>